{"title":"题解-NOIP2018T4对称二叉树","slug":"题解-NOIP2018T4对称二叉树","date":"2018-12-01T07:01:46.000Z","updated":"2018-12-01T07:03:52.625Z","comments":true,"excerpt":"","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>smallfang noip 考试失利所以得了198,感觉????</p>\n<h1 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h1><p>应该都知道</p>\n<h1 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;iostream&gt;</span><br><span class=\"line\">#define ull unsigned long long</span><br><span class=\"line\">using namespace std;</span><br><span class=\"line\">int ans=1,n,v[1000005],l[1000005],r[10000005]; </span><br><span class=\"line\">struct node&#123;</span><br><span class=\"line\">    int d;</span><br><span class=\"line\">    int t;</span><br><span class=\"line\">    int w;</span><br><span class=\"line\">    node(int da,int ta,int tw)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    \td=da;</span><br><span class=\"line\">    \tt=ta;</span><br><span class=\"line\">    \tw=tw;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    bool operator==(const node&amp;b)const&#123;return d==b.d&amp;&amp;w==b.w&amp;&amp;t==b.t;&#125;</span><br><span class=\"line\">&#125;; </span><br><span class=\"line\">ull id(int x,int *l1,int *r1,ull h)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">if(l1[x]&gt;0) h=id(l1[x],l1,r1,h*1009+1);  </span><br><span class=\"line\">if(r1[x]&gt;0) h=id(r1[x],l1,r1,h*1009+2);</span><br><span class=\"line\">return h*1009+v[x];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">node dfs(int x)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    if(x&lt;0)return node(0,0,0);</span><br><span class=\"line\">    node ll=dfs(l[x]);</span><br><span class=\"line\">    node rr=dfs(r[x]);</span><br><span class=\"line\">    if(ll==rr&amp;&amp;l[x]&gt;0&amp;&amp;id(l[x],l,r,0)==id(r[x],r,l,0))</span><br><span class=\"line\">        ans=max(ans,2*ll.t+1);</span><br><span class=\"line\">    return node(max(ll.d,rr.d)+1,ll.t+rr.t+1,ll.w+rr.w+v[x]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">int main()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    cin&gt;&gt;n;</span><br><span class=\"line\">    for(int i=1;i&lt;=n;i++)cin&gt;&gt;v[i];</span><br><span class=\"line\">    for(int i=1;i&lt;=n;i++)cin&gt;&gt;l[i]&gt;&gt;r[i];</span><br><span class=\"line\">    dfs(1);</span><br><span class=\"line\">    cout&lt;&lt;ans;</span><br><span class=\"line\">    return 0;\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":[],"tags":[{"name":"题解","path":"api/tags/题解.json"}]}